(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1683:(e,t,s)=>{Promise.resolve().then(s.bind(s,1730))},1788:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>i});var a=s(5155),r=s(2115),l=s(7982),n=s(4565);let d=(0,r.createContext)(),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=(0,n.hg)(l.j,e=>{i(e),o(!1)});return()=>e()},[]),(0,a.jsx)(d.Provider,{value:{user:s,loading:c},children:t})},c=()=>(0,r.useContext)(d)},7982:(e,t,s)=>{"use strict";s.d(t,{db:()=>i,j:()=>d,k:()=>c});var a=s(9904),r=s(4565),l=s(7058);let n=(0,a.Wp)({apiKey:"AIzaSyARR6IyFHdezAmWYwg3e3ukVU1gk1hS-4w",authDomain:"webapp-bf511.firebaseapp.com",projectId:"webapp-bf511",storageBucket:"webapp-bf511.firebasestorage.app",messagingSenderId:"993111090444",appId:"1:993111090444:web:d76575fea5115ec8879529",measurementId:"G-2B7R6D0GSS"}),d=(0,r.xI)(n),i=(0,l.aU)(n),c=async e=>{let t={url:"".concat(window.location.origin,"/public/user/signin"),handleCodeInApp:!1};try{return await (0,r.gA)(e,t),!0}catch(e){throw console.error("Error sending verification email:",e),e}};s.e(553).then(s.bind(s,6553)).then(e=>{let{getAnalytics:t}=e;t(n)})},1730:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),l=s(1788),n=s(7982),d=s(7058);let i=()=>{let{user:e}=(0,l.A)(),t=(0,r.useMemo)(()=>new Date,[]),s=e=>{let t=[],s=["Mon","Tue","Wed","Thu","Fri"];for(let a=0;a<5;a++){let r=new Date(e);r.setDate(e.getDate()+a),t.push({dayName:s[a],dayNumber:r})}return t},[i,c]=(0,r.useState)(t.getMonth()),[o,m]=(0,r.useState)(t.getFullYear()),[u,x]=(0,r.useState)(function(e){let t=new Date(e),s=t.getDay();return t.setDate(t.getDate()-(0===s?6:s-1)),t}(t)),[g,b]=(0,r.useState)(new Date),[h,p]=(0,r.useState)([]),[y,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)(s(u)),[w,v]=(0,r.useState)(""),[S,D]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[I,A]=(0,r.useState)(!1),[E,_]=(0,r.useState)(null),M=["5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","00:00","1:00","2:00","3:00","4:00"];(0,r.useEffect)(()=>{(async()=>{if(e){let t=(0,d.rJ)(n.db,"classes"),s=(0,d.P)(t,(0,d._M)("user","==",e.uid));p((await (0,d.GG)(s)).docs.map(e=>({id:e.id,...e.data()})))}})()},[e]);let F=e=>{let t=new Date(u);t.setDate(u.getDate()+("next"===e?7:-7)),x(t),N(s(t)),c(t.getMonth()),m(t.getFullYear())};(0,r.useEffect)(()=>{let e=setInterval(()=>{b(new Date)},6e4);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{let e=t.getDay();f(6===e||0===e)},[t]);let L=e=>e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear(),P=(()=>{let e=M.length,t=g.getHours();return t<5&&(t+=24),(t-5+g.getMinutes()/60)/e*100})(),W=async t=>{if(t.preventDefault(),w){let t={subject:w,day:S,time:k,user:e.uid,date:new Date};try{if(null!==E){let e=h[E].id,s=(0,d.H9)(n.db,"classes",e);await (0,d.mZ)(s,t);let a=[...h];a[E]={...t,id:e},p(a),_(null)}else{let e=await (0,d.gS)((0,d.rJ)(n.db,"classes"),t);p([...h,{...t,id:e.id}])}v(""),A(!1)}catch(e){console.error("Error adding/updating lesson: ",e)}}},U=async()=>{let e=h[E].id,t=(0,d.H9)(n.db,"classes",e);await (0,d.kd)(t),p(h.filter((e,t)=>t!==E)),v(""),A(!1),_(null)},Y=(e,t)=>{v(e.subject),D(e.day),C(e.time),A(!0),_(t)};return(0,a.jsxs)("div",{children:[e&&e.emailVerified?(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 w-full mx-auto",children:[(0,a.jsxs)("div",{className:"col-span-10 bg-white p-6 rounded-lg shadow-md w-full relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 cursor-pointer",children:new Date(o,i).toLocaleString("en-US",{month:"long",year:"numeric"})}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)("button",{onClick:()=>F("previous"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"← Previous Week"}),(0,a.jsx)("button",{onClick:()=>F("next"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Next Week →"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-6 border bg-gray-50 w-full relative",children:[(0,a.jsx)("div",{className:"col-span-1 border-r bg-gray-100 p-2 text-sm font-bold text-center",children:"Time"}),j.map((e,t)=>(0,a.jsxs)("div",{className:"border-r bg-gray-100 p-2 text-sm font-bold text-center",children:[e.dayName,(0,a.jsx)("div",{className:"text-xs font-normal ".concat(L(e.dayNumber)?"text-red-500":"text-gray-500"),children:e.dayNumber.getDate()})]},e.dayName)),M.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("div",{className:"col-span-1 border-t border-r bg-gray-50 p-2 text-xs text-gray-500 text-center",children:e}),j.map((t,s)=>(0,a.jsx)("div",{className:"border-t border-r bg-white p-2 min-h-12 max-h-24 hover:bg-gray-100 flex-1",onClick:()=>{let t=h.find(t=>t.day===j[s].dayName&&t.time===e);t?Y(t,h.indexOf(t)):(D(j[s].dayName),C(e),A(!0))},children:h.some(t=>t.day===j[s].dayName&&t.time===e)&&(0,a.jsx)("div",{className:"text-xs font-semibold text-blue-500",children:h.find(t=>t.day===j[s].dayName&&t.time===e).subject})},s))]},t)),(0,a.jsx)("div",{className:"absolute left-0 right-0 z-10",style:{top:"calc(".concat(P,"% + 2rem)"),height:"2px",backgroundColor:"red"}})]})]}),(0,a.jsxs)("div",{className:"col-span-2 bg-white p-6 rounded-lg shadow-md min-w-[250px]",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Today's Schedule"}),(0,a.jsx)("div",{className:"space-y-2",children:y?(0,a.jsx)("div",{className:"bg-white p-2 rounded border border-gray-200 text-center text-sm font-medium text-gray-600",children:"It's the weekend! No classes today!"}):h.filter(e=>e.day===t.toLocaleString("en-US",{weekday:"short"})).sort((e,t)=>parseInt(e.time.split(":")[0])-parseInt(t.time.split(":")[0])).map((e,t)=>(0,a.jsx)("div",{className:"bg-white p-2 rounded border border-gray-200 text-sm flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-600",children:e.subject}),(0,a.jsxs)("p",{className:"text-gray-500",children:[e.time," - ",parseInt(e.time.split(":")[0])+1,":00"]})]})},t))})]})]}):(0,a.jsxs)("div",{className:"text-center mt-12",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Welcome to Calendar App"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Please verify your email to access the calendar."})]}),I&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:null!==E?"Edit Lesson":"Add New Lesson"}),(0,a.jsxs)("form",{onSubmit:W,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Subject"}),(0,a.jsx)("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md p-2",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{A(!1),_(null),v("")},className:"mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:null!==E?"Update Lesson":"Add Lesson"}),null!==E&&(0,a.jsx)("button",{type:"button",onClick:U,className:"ml-2 px-4 py-2 bg-red-500 text-white rounded-lg",children:"Delete Lesson"})]})]})]})})]})};function c(){return(0,a.jsxs)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:[(0,a.jsx)("main",{className:"flex flex-col gap-8 row-start-2 items-center sm:items-start",children:(0,a.jsx)(i,{})}),(0,a.jsx)("footer",{className:"row-start-3 flex gap-6 flex-wrap items-center justify-center"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[697,992,512,778,441,517,358],()=>t(1683)),_N_E=e.O()}]);